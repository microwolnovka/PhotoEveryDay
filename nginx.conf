server {
  listen 80;

  location /photos {
    root /tmp;
  }
               
	location /debug {
		proxy_set_header DEBUG "DEBUG";
		proxy_pass http://localhost/fastcgi;
	}

  location /upload {
          
    limit_except POST          { deny all; }

    client_body_temp_path      /tmp/photos;
    client_body_in_file_only   on;
    client_body_buffer_size    128K;
    client_max_body_size       1000M;

    proxy_pass_request_headers on;
    proxy_set_header           X-FILE $request_body_file; 
    proxy_set_body             off;
    proxy_redirect             off;
    proxy_pass                 http://localhost/fastcgi;
  }

	location /info_upload{
		proxy_pass http://localhost/fastcgi;	
	}

  location /fastcgi {
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
    fastcgi_pass unix:/tmp/fastcgi_daemon.sock;
  }
}





